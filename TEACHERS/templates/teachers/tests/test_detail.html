{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2>{{ test.title }}</h2>
    <p>{{ test.description }}</p>
    <p><strong>Test KODI:</strong> {{ test.code }}</p>
    <hr>

    <h4>Savollar ro‘yxati ({{ test.questions.count }})</h4>
    <a href="{% url 'teachers:add_question' test.id %}" class="btn btn-success mb-3">+ Yangi savol qo‘shish</a>

    {% for question in questions %}
        <div class="card mb-3">
            <div class="card-body">
                {% if question.text %}
                    <h5>{{ question.text }}</h5>
                {% endif %}
                {% if question.image %}
                    <img src="{{ question.image.url }}" class="img-fluid mb-2" alt="Question Image">
                {% endif %}
                {% if question.warning %}
                    <p class="text-danger"><strong>Eslatma:</strong> {{ question.warning }}</p>
                {% endif %}

                <div class="mt-2">
                    <a href="{% url 'teachers:edit_question' question.id %}" class="btn btn-sm btn-primary">Tahrirlash</a>
                    <a href="{% url 'teachers:delete_question' question.id %}" class="btn btn-sm btn-danger"
                       onclick="return confirm('Bu savolni o‘chirishga ishonchingiz komilmi?')">O‘chirish</a>
                </div>

                <hr>
                <h6>Javob variantlari:</h6>
                <ul>
                    {% for option in question.options.all %}
                        <li>
                            {% if option.text %}{{ option.text }}{% endif %}
                            {% if option.image %}<img src="{{ option.image.url }}" height="30">{% endif %}
                            {% if option.is_correct %}
                                <strong class="text-success"> (To‘g‘ri javob)</strong>
                            {% endif %}
                        </li>
                    {% empty %}
                        <li>Variantlar yo‘q</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    {% empty %}
        <p>Hozircha hech qanday savollar yo‘q.</p>
    {% endfor %}
</div>
{% endblock %}
